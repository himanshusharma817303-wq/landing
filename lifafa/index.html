<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Opening Rozsetu...</title>

<style>
body{
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:#0B0B10;
    color:white;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
}
</style>
</head>

<body>
<p>Opening Rozsetu App...</p>

<script>

/* =========================
   CONFIG
========================= */

const PLAY_STORE =
"https://play.google.com/store/apps/details?id=in.rojsetu.taskapp";

/* =========================
   PARAMS
========================= */

const params = new URLSearchParams(location.search);
const e = params.get("e");
const t = params.get("t");

if (!e || !t) {
    location.replace(PLAY_STORE);
}

/* =========================
   DEEP LINK
========================= */

const deepLink = `rozsetu://lifafa?e=${e}&t=${t}`;

let redirected = false;

/* =========================
   METHOD 1 — iframe open
========================= */

const iframe = document.createElement("iframe");
iframe.style.display = "none";
iframe.src = deepLink;
document.body.appendChild(iframe);

/* =========================
   METHOD 2 — direct open backup
========================= */

setTimeout(() => {
    window.location.href = deepLink;
}, 300);

/* =========================
   METHOD 3 — HARD FALLBACK
   (never gets stuck)
========================= */

setTimeout(() => {
    if (!redirected) {
        redirected = true;
        window.location.href = PLAY_STORE;
    }
}, 2000);

/* =========================
   EXTRA SAFETY
========================= */

window.addEventListener("pagehide", () => {
    redirected = true;
});

window.addEventListener("blur", () => {
    redirected = true;
});

</script>

</body>
</html>
